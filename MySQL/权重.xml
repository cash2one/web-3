<select id="matchHouseListPage" resultMap="matchHouseMap" parameterType="com.uban.crm.domain.order.MatchHouse">
    select
    h.id,
    o.name,
    o.circle_name,
    o.city_id,
    h.house_area,
    concat(h.price, "（元/平/天）") as price,
    concat(h.month_price, "（元/月）") as month_price,
    h.deliver_standard,
    h.floor_no,
    case when h.house_area <![CDATA[>]]> #{house.orderAreaBegin} then 1 else 0 end as houseareabeginquanzhong,
    case when h.house_area <![CDATA[<]]> #{house.orderAreaEnd} then 1 else 0 end as houseareaendquanzhong,
    case when h.price <![CDATA[>]]> #{house.orderPriceBegin} then 1 else 0 end as pricebeginquanzhong,
    case when h.price <![CDATA[<]]> #{house.orderPriceEnd} then 1 else 0 end as priceendquanzhong,
    case when h.month_price <![CDATA[>]]> #{house.orderPriceMonthBegin} then 1 else 0 end as monthpricebeginquanzhong,
    case when h.month_price <![CDATA[<]]> #{house.orderPriceMonthEnd} then 1 else 0 end as monthpriceendquanzhong,
    CASE h.canregister
        WHEN 0 THEN '无'
        WHEN 1 THEN '是'
        WHEN 2 THEN '否'
        ELSE ''
    END AS canregisterStr,
    CASE h.howpay
        WHEN 0 THEN '无'
        WHEN 1 THEN '押一付一'
        WHEN 2 THEN '押一付三'
        WHEN 3 THEN '押一付六'
        WHEN 4 THEN '押二付三'
        WHEN 5 THEN '押二付六'
        ELSE ''
    END AS howpayStr
    from house h
    join office o
    on h.office_id=o.id
    <trim prefix="where" prefixOverrides="and|or">
        h.`invalid_type`=0
        <if test="house.circleId != null">
            and o.circle_id = #{house.circleId}
        </if>
        <if test="house.districtId != null">
            and o.district_id = #{house.districtId}
        </if>
        <if test="house.cityId != null">
            and o.city_id = #{house.cityId}
        </if>

        <if test="house.orderAreaBegin1 != null">
            and h.house_area <![CDATA[>]]> #{house.orderAreaBegin1}
        </if>
        <if test="house.orderAreaEnd1 != null">
            and h.house_area <![CDATA[<]]> #{house.orderAreaEnd1}
        </if>
        <if test="house.orderPriceBegin1 != null">
            and h.price <![CDATA[>]]> #{house.orderPriceBegin1}
        </if>
        <if test="house.orderPriceEnd1 != null">
            and h.price <![CDATA[<]]> #{house.orderPriceEnd1}
        </if>
        <if test="house.orderPriceMonthBegin1 != null">
            and h.month_price <![CDATA[>]]> #{house.orderPriceMonthBegin1}
        </if>
        <if test="house.orderPriceMonthEnd1 != null">
            and h.month_price <![CDATA[<]]> #{house.orderPriceMonthEnd1}
        </if>
    </trim>
    order by houseareabeginquanzhong+houseareaendquanzhong+pricebeginquanzhong+priceendquanzhong+monthpricebeginquanzhong+monthpriceendquanzhong desc
</select>
